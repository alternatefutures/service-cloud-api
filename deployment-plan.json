{
  "version": "1.0",
  "timestamp": "2025-11-25T08:46:19.887Z",
  "sdlFile": "deploy-infisical-final.yaml",
  "sdlContent": "---\n# Infisical Secrets Manager on Akash\n# Deploy this FIRST, then deploy main application\nversion: \"2.0\"\n\nservices:\n  # MongoDB - Backend for Infisical\n  mongo:\n    image: mongo:7\n    env:\n      - MONGO_INITDB_ROOT_USERNAME=admin\n      - MONGO_INITDB_ROOT_PASSWORD=fd88a9fe393bdddeed336a7f35289796\n    expose:\n      - port: 27017\n        as: 27017\n        to:\n          - service: infisical\n    params:\n      storage:\n        data:\n          mount: /data/db\n          readOnly: false\n\n  # Infisical - Open Source Secrets Manager\n  infisical:\n    image: infisical/infisical:latest\n    env:\n      - ENCRYPTION_KEY=2931120f0296358e9aaf6fe4929f5ad8\n      - JWT_SIGNUP_SECRET=36bbae0d102b24a76a93f3e90feaa2b1c38ba4eb7d8c2a95966904b6c4722ffe\n      - JWT_REFRESH_SECRET=36bbae0d102b24a76a93f3e90feaa2b1c38ba4eb7d8c2a95966904b6c4722ffe\n      - JWT_AUTH_SECRET=36bbae0d102b24a76a93f3e90feaa2b1c38ba4eb7d8c2a95966904b6c4722ffe\n      - JWT_SERVICE_SECRET=36bbae0d102b24a76a93f3e90feaa2b1c38ba4eb7d8c2a95966904b6c4722ffe\n      - MONGO_URL=mongodb://admin:fd88a9fe393bdddeed336a7f35289796@mongo:27017/infisical?authSource=admin\n      - SITE_URL=https://secrets.alternatefutures.ai\n      - HTTPS_ENABLED=false\n      - TELEMETRY_ENABLED=false\n      - SMTP_HOST=smtp.resend.com\n      - SMTP_PORT=587\n      - SMTP_SECURE=false\n      - SMTP_FROM_ADDRESS=noreply@alternatefutures.ai\n      - SMTP_FROM_NAME=Alternate Futures\n    expose:\n      - port: 8080\n        as: 80\n        to:\n          - global: true\n        accept:\n          - secrets.alternatefutures.ai\n    depends_on:\n      - mongo\n\nprofiles:\n  compute:\n    mongo:\n      resources:\n        cpu:\n          units: 1.0\n        memory:\n          size: 2Gi\n        storage:\n          - name: data\n            size: 20Gi\n\n    infisical:\n      resources:\n        cpu:\n          units: 1.0\n        memory:\n          size: 1Gi\n        storage:\n          size: 512Mi\n\n  placement:\n    dcloud:\n      # REQUIRE AUDITED PROVIDERS\n      signedBy:\n        anyOf:\n          - \"akash1365yvmc4s7awdyj3n2sav7xfx76adc6dnmlx63\"\n      attributes:\n        host: akash\n      pricing:\n        mongo:\n          denom: uakt\n          amount: 25\n        infisical:\n          denom: uakt\n          amount: 20\n\ndeployment:\n  mongo:\n    dcloud:\n      profile: mongo\n      count: 1\n\n  infisical:\n    dcloud:\n      profile: infisical\n      count: 1\n",
  "deposit": {
    "amount": 5000000,
    "currency": "uakt"
  },
  "workflow": [
    {
      "step": 1,
      "name": "Get Account Address",
      "tool": "mcp__akash__get-akash-account-addr",
      "description": "Retrieve the Akash wallet address for deployment",
      "parameters": {},
      "expectedOutput": "Wallet address (akash1...)"
    },
    {
      "step": 2,
      "name": "Check Balance",
      "tool": "mcp__akash__get-akash-balances",
      "description": "Verify sufficient AKT balance (need ~5 AKT minimum)",
      "parameters": {
        "address": "{{WALLET_ADDRESS}}"
      },
      "expectedOutput": "Balance in uakt (1 AKT = 1,000,000 uakt)"
    },
    {
      "step": 3,
      "name": "Create Deployment",
      "tool": "mcp__akash__create-deployment",
      "description": "Submit the SDL to create a new deployment on Akash",
      "parameters": {
        "rawSDL": "{{SDL_CONTENT}}",
        "deposit": 5000000,
        "currency": "uakt"
      },
      "expectedOutput": "Deployment created with dseq (deployment sequence number)"
    },
    {
      "step": 4,
      "name": "Get Bids",
      "tool": "mcp__akash__get-bids",
      "description": "Wait for and retrieve provider bids. May need to call multiple times.",
      "parameters": {
        "dseq": "{{DSEQ}}",
        "owner": "{{WALLET_ADDRESS}}"
      },
      "expectedOutput": "List of bids with provider addresses and pricing",
      "nextStepCondition": "Wait 10-30 seconds for bids. Call again if empty."
    },
    {
      "step": 5,
      "name": "Create Lease",
      "tool": "mcp__akash__create-lease",
      "description": "Accept a bid and create lease with chosen provider",
      "parameters": {
        "owner": "{{WALLET_ADDRESS}}",
        "dseq": "{{DSEQ}}",
        "gseq": 1,
        "oseq": 1,
        "provider": "{{PROVIDER_ADDRESS}}"
      },
      "expectedOutput": "Lease created successfully"
    },
    {
      "step": 6,
      "name": "Send Manifest",
      "tool": "mcp__akash__send-manifest",
      "description": "Send the SDL manifest to the provider to start containers",
      "parameters": {
        "sdl": "{{SDL_CONTENT}}",
        "owner": "{{WALLET_ADDRESS}}",
        "dseq": "{{DSEQ}}",
        "gseq": 1,
        "oseq": 1,
        "provider": "{{PROVIDER_ADDRESS}}"
      },
      "expectedOutput": "Manifest sent successfully"
    },
    {
      "step": 7,
      "name": "Get Services",
      "tool": "mcp__akash__get-services",
      "description": "Retrieve the URIs for deployed services",
      "parameters": {
        "owner": "{{WALLET_ADDRESS}}",
        "dseq": "{{DSEQ}}",
        "gseq": 1,
        "oseq": 1,
        "provider": "{{PROVIDER_ADDRESS}}"
      },
      "expectedOutput": "Service URIs including the Infisical endpoint"
    }
  ],
  "postDeployment": [
    "Configure DNS: Point secrets.alternatefutures.ai to provider URI",
    "Access Infisical at https://secrets.alternatefutures.ai",
    "Create admin account on first access",
    "Store DSEQ for future reference: {{DSEQ}}"
  ]
}